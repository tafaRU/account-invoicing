-
    In order to test process of the Account Invoice Uos,
- 
    I create a sale order.
-  
    !record {model: sale.order, id: sale_order_test}:
        partner_id: base.res_partner_2
        order_line:
            - product_id: product.product_product_2
              product_uom_qty: 8
              product_uom: product.product_uom_hour
              product_uos_qty: 1
              product_uom: product.product_uom_day
-
    I confirm the sale order.
-
    !workflow {model: sale.order, action: order_confirm, ref: sale_order_test}
-
    I create manual Invoice for order.
-
    !record {model: sale.make.invoice, id: sale_make_invoice_1}:
        invoice_date: !eval time.strftime('%Y-%m-%d')
-
    !python {model: sale.make.invoice}: |
        ctx = context.copy()
        ctx = ctx.update({"active_model": 'sale.order', "active_ids": [ref("sale_order_test")], "active_id":ref("sale_order_test")})
        self.make_invoices(cr, uid, [ref("sale_make_invoice_1")], context=ctx)
-
    I check the invoice details after dispatched delivery.
-
    !python {model: sale.order}: |
        order = self.browse(cr, uid, ref("sale_order_test"))
        assert order.invoice_ids, "Invoice is not created."
        for sale_line in order.order_line:
            for invoice_line in sale_line.invoice_lines:
                assert invoice_line.sale_uos_id == sale_line.product_uos, "Uos are not correspond"
                assert invoice_line.sale_uos_qty == sale_line.product_uos_qty, "Uos qty are not correspond"
